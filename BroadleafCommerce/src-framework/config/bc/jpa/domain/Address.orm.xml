<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd" version="1.0">

	<named-query name="READ_ADDRESS_BY_CUSTOMER_ID" >
		<query>SELECT address FROM org.broadleafcommerce.profile.domain.Address address
		WHERE address.customer.id = :customerId
		ORDER BY address.id</query>
	</named-query>

	<named-query name="READ_ADDRESS_BY_CUSTOMER_ID_AND_NAME" >
		<query>SELECT address FROM org.broadleafcommerce.profile.domain.Address address
		WHERE address.customer.id = :customerId
		AND address.addressName = :addressName</query>
	</named-query>

	<named-query name="READ_ADDRESS_BY_ID" >
		<query>SELECT address FROM org.broadleafcommerce.profile.domain.Address address
		WHERE address.id = :addressId</query>
	</named-query>

	<entity class="org.broadleafcommerce.profile.domain.BroadleafCustomerAddress" name="address">
        <table name="BLC_CUSTOMER_ADDRESS" >
        	<unique-constraint>
        		<column-name>CUSTOMER_ID</column-name>
        		<column-name>ADDRESS_NAME</column-name>
        	</unique-constraint>
        </table>
        <inheritance strategy="JOINED"/>
		<entity-listeners>
			<entity-listener class="org.broadleafcommerce.profile.domain.listener.TemporalTimestampListener" />
		</entity-listeners>
        <attributes>
            <id name="id">
            	<column name="ADDRESS_ID"/>
                <generated-value/>
            </id>
            <basic name="addressName">
                <column name="ADDRESS_NAME" />
            </basic>
            <basic name="addressLine1">
                <column name="ADDRESS_LINE1"/>
            </basic>
            <basic name="addressLine2">
            	<column name="ADDRESS_LINE2"/>
            </basic>
            <basic name="city">
            	<column name="CITY"/>
            </basic>
            <basic name="stateProvRegion">
            	<column name="STATEPROVREGION_CODE"/>
            </basic>
            <basic name="postalCode">
            	<column name="POSTAL_CODE"/>
            </basic>
            <basic name="zipFour">
            	<column name="ZIP_FOUR"/>
            </basic>
            <basic name="country">
            	<column name="COUNTRY"/>
            </basic>
            <basic name="tokenizedAddress">
            	<column name="TOKENIZEDADDRESS"/>
            </basic>
            <basic name="standardized">
            	<column name="STANDARDIZED"/>
            </basic>
            <many-to-one name="customer" target-entity="org.broadleafcommerce.profile.domain.BroadleafCustomer">
            	<join-column name="CUSTOMER_ID"/>
            	<cascade><cascade-all/></cascade>
            </many-to-one>
        </attributes>
    </entity>
</entity-mappings>