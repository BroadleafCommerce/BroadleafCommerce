<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * Copyright 2008-2009 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->
<mx:Canvas
	xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:helpers="org.broadleafcommerce.admin.core.view.helpers.*"
	xmlns:view="org.broadleafcommerce.admin.cms.view.*"
	xmlns:growl="com.hydraframework.components.growler.*"
	width="100%"
	height="100%"
	creationPolicy="all"
	creationComplete="handleCreationComplete()">
	<mx:Script>
		<![CDATA[
			import mx.core.Application;
			import org.broadleafcommerce.util.growlSkins.DefaultGrowl;
			import org.broadleafcommerce.admin.core.model.NotificationModel;
			import org.broadleafcommerce.admin.core.control.events.RemoveAuthenticationEvent;
			import org.broadleafcommerce.admin.core.model.AppModelLocator;
			import org.broadleafcommerce.admin.core.model.AuthenticationModel;
			//import com.flexspy.FlexSpy;

			[Bindable]
			private var authModel:AuthenticationModel = AppModelLocator.getInstance().authModel;

			[Bindable]
			private var notificationModel:NotificationModel = AppModelLocator.getInstance().notificationModel;

			private function handleCreationComplete():void{
				notificationModel.growlerRef = this.growler;
			}

			private function handleManageAccountLabelClick():void{

			}

			private function handleLogoutLabelClick():void{
				new RemoveAuthenticationEvent().dispatch();
			}
		]]>
	</mx:Script>
	<mx:Binding
		source="authModel.userPrincipal.login"
		destination="usernameLabel.text"/>
	<mx:Binding
		source="contentViewStack"
		destination="bb.dataProvider"/>
	<helpers:AdminContentViewHelper
		id="adminContent" />
	<mx:HBox
		left="320"
		verticalAlign="middle"
		top="10"
		horizontalGap="15">
		<mx:HBox
			horizontalGap="0">
			<mx:Label
				text="Logged in as:"/>
			<mx:Label
				id="usernameLabel"
				fontWeight="bold"/>
			<mx:Label
				text="|"/>
			<mx:Label
				text="Manage Account"
				textDecoration="underline"
				mouseChildren="false"
				buttonMode="true"
				useHandCursor="true"
				click="handleManageAccountLabelClick()"/>
			<mx:Label
				text="|"/>
			<mx:Label
				text="Logout"
				textDecoration="underline"
				mouseChildren="false"
				buttonMode="true"
				useHandCursor="true"
				click="handleLogoutLabelClick()"/>
				<!--mx:Button id="btnFlexSpy" label="FlexSpy" click="FlexSpy.show()" /-->
		</mx:HBox>
		<mx:VRule
			height="45" />
		<mx:ToggleButtonBar
			id="bb"/>
	</mx:HBox>
	<mx:ViewStack
		id="contentViewStack"
		top="75"
		left="8"
		right="8"
		bottom="8">
		<!--security:SecurityCanvas
			id="securityCanvas"
			label="Users"
			height="100%"
			width="100%" />
		<view:CodeTypeCanvas
			id="codeTypeCanvas"
			label="Code Types"
			height="100%"
			width="100%"/
			<view:ContentCanvas width="100%" height="100%" />
			-->
	</mx:ViewStack>
	<growl:Growler
		top="5"
		height="{this.height-10}"
		growlerClass="{DefaultGrowl}"
		id="growler"
		x="{this.width-growler.width}"
		horizontalGap="5"
		verticalGap="5"
		/>
</mx:Canvas>
